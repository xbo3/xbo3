
<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>index – 히어로/소켓/왕빅 + 슬라이드 전환</title>
<style>
  :root{ --bg:#0e1216; --panel:#11161c; --card:#0f1419; --stroke:#1e2731;
         --fg:#e7eef6; --muted:#9fb1c3; --time:3.75s; --ease:cubic-bezier(.2,.7,.2,1); --radius:16px;
         --hero-dur:2s; --hero-ease:cubic-bezier(.15,.85,.1,1); /* 강한 ease-out */
         --time-page:7.5s; /* 페이지 전환은 기본의 2배 느리게 */ }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{margin:0;background:var(--bg);color:var(--fg);font:14px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Noto Sans KR,sans-serif}

  .page{display:grid;grid-template-columns:280px 1fr;gap:18px;min-height:100vh;padding:18px}
  aside{background:linear-gradient(180deg,#11161b,#0e1318);border:1px solid var(--stroke);border-radius:14px;padding:14px}
  .group{margin:12px 0}
  .group>h4{margin:0 0 8px;font-weight:800;color:#cfe0f2;cursor:pointer;user-select:none}
  .group.collapsed > .item{display:none}
  .item{padding:10px 12px;border:1px solid #202a35;border-radius:10px;background:#0f1419;margin-top:8px;cursor:pointer;transition:box-shadow .25s ease,border-color .25s ease}
  .item.neon{box-shadow:0 0 10px rgba(122,199,255,.35),0 0 22px rgba(122,199,255,.25);border-color:#3b6ea8}
  .item.neon-blink{animation:neonBlink 1.6s ease-in-out infinite}
  @keyframes neonBlink{
    0%,100%{box-shadow:0 0 8px rgba(122,199,255,.28),0 0 18px rgba(122,199,255,.20)}
    50%{box-shadow:0 0 14px rgba(122,199,255,.45),0 0 28px rgba(122,199,255,.35)}
  }
  .pill-row{display:flex;gap:8px;margin:8px 0 6px}
  .pill{flex:1;padding:10px 0;border-radius:999px;border:0;font-weight:800;color:white;background:linear-gradient(180deg,#5d8cff,#406eff);cursor:pointer}
  .pill.secondary{background:linear-gradient(180deg,#2b3240,#1b2230);color:#cfe0f2;border:1px solid #2a3442}
  .vip{width:100%;padding:10px 12px;border-radius:12px;background:#0f151c;border:1px solid #233042;color:#cfe0f2;text-align:left;cursor:pointer}

  .center{position:relative}
  /* HERO */
  .hero-row{overflow:hidden;transition:max-height .6s var(--ease);} /* 펼침/접힘 */
  .center.hero-collapsed .hero-row{max-height:0!important}
  .hero-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:14px;margin-bottom:14px}
  .hero-card{position:relative;background:linear-gradient(180deg,#0f151b,#0d1217);border:1px solid #223040;border-radius:18px;min-height:300px;
             transform:translateY(-110%);opacity:0;transition:transform var(--hero-dur) var(--hero-ease),opacity .6s ease}
  .hero-card.enter{transform:translateY(0);opacity:1}
  .hero-card .title{position:absolute;left:16px;bottom:14px;font-weight:800}
  .tg{position:absolute;right:12px;bottom:12px;width:34px;height:34px;border-radius:50%;display:grid;place-items:center;background:#1f2b3a;border:1px solid #34506e}
  .tg:before{content:"✈";font-size:18px}

  /* SOCKETS (상단 한 줄 세트: 좌 빅1 + 우 스몰4) */
  .sockets-wrap{overflow:hidden;will-change:transform,max-height,opacity}
  .sockets{display:grid;grid-template-columns:repeat(4,1fr);grid-auto-rows:170px;gap:14px;margin-bottom:14px}
  .s-big{grid-column:1 / span 2;grid-row:1 / span 2}
  .s-card{background:linear-gradient(180deg,#0f151b,#0d1217);border:1px solid #223040;border-radius:18px}

  /* CONTENT (왕빅/페이지) */
  .content-wrap{will-change:transform}
  .king{background:linear-gradient(180deg,#121922,#0f151c);border:1px solid #223040;border-radius:18px;min-height:calc(100vh - 180px);padding:18px}
  .king h3{margin:0 0 8px}
  .muted{color:var(--muted)}

  /* 슬라이드 전환 상태 */
  .center.swap .sockets-wrap{opacity:0; transform:translateY(60px);}   
  .anim-sockets{transition:transform var(--time) var(--ease), opacity .6s ease;}  
  .anim-content{transition:transform var(--time-page) var(--ease);}  

  /* 페이지 인 애니메이션(카테고리 화면 보일 때) */
  .content-section{display:none}
  .content-section.active{display:block;animation:pageIn 2.8125s var(--ease)}
  @keyframes pageIn{from{opacity:0} to{opacity:1}} /* 위치 이동 없이 페이드만: 과상승 방지 */

  /* 네온/프레임 효과 */
  .moving .sockets, .moving .king{outline:2px solid rgba(255,255,140,.45);box-shadow:0 0 10px rgba(255,255,140,.45),0 0 24px rgba(255,255,120,.25);border-radius:18px}
  .neon-pulse{animation:neonPulse 2s ease-in-out 1}
  @keyframes neonPulse{0%,100%{box-shadow:0 0 0 2px rgba(255,255,140,.55),0 0 10px rgba(255,255,140,.55)}50%{box-shadow:0 0 0 2px rgba(255,255,0,.95),0 0 22px rgba(255,255,120,.95),0 0 40px rgba(255,255,90,.85)}}
  .item.neon-out{animation:neonOut 1s ease-out forwards}
  @keyframes neonOut{
    0%{box-shadow:0 0 14px rgba(122,199,255,.45),0 0 28px rgba(122,199,255,.35);border-color:#3b6ea8}
    25%{box-shadow:0 0 10px rgba(122,199,255,.30),0 0 20px rgba(122,199,255,.24);border-color:#3a679e}
    55%{box-shadow:0 0 7px rgba(122,199,255,.20),0 0 14px rgba(122,199,255,.14);border-color:#30557f}
    80%{box-shadow:0 0 4px rgba(122,199,255,.12),0 0 8px rgba(122,199,255,.08);border-color:#263f60}
    100%{box-shadow:none;border-color:#202a35}
  }
  .framed .content-wrap{outline:4px solid #ff2f2f;outline-offset:-10px;border-radius:20px}
  .framed .king{box-shadow:0 0 0 4px #ffd400 inset}
</style>
</head>
<body>
  <div class="page">
    <aside id="sidebar">
      <div class="pill-row">
        <button class="pill">가입</button>
        <button class="pill secondary">로그인</button>
      </div>
      <button id="vipToggle" class="vip">VIP HOST CALL ▾</button>

      <div class="group" data-group="category">
        <h4>카테고리 ›</h4>
        <div class="item" data-go="sec-partner-service">파트너서비스</div>
        <div class="item" data-go="sec-benefits">등급별 혜택</div>
        <div class="item" data-go="sec-partner-greet">파트너인사</div>
        <div class="item" data-go="sec-contact-write">문의하기</div>
        <div class="item" data-go="sec-contact">문의</div>
        <div class="item" data-go="sec-preference">선호도체크</div>
        <div class="item" data-go="sec-quiz-coupon">퀴즈풀고쿠폰받기</div>
        <div class="item" data-go="sec-coupon-apply">쿠폰신청하기</div>
      </div>

      <div class="group" data-group="promo">
        <h4>프로모션 ›</h4>
        <div class="item" data-go="sec-promo-official">공식프로모션</div>
        <div class="item" data-go="sec-promo-partner">파트너프로모션</div>
        <div class="item" data-go="sec-promo-now">지금진행중</div>
        <div class="item" data-go="sec-promo-join">프로모션참여하기</div>
      </div>

      <div class="group" data-group="coupon">
        <h4>💸 쿠폰 💸 ›</h4>
        <div class="item" data-go="sec-coupon-new">💸 신규무료쿠폰</div>
        <div class="item" data-go="sec-coupon-weekly">💸 주간플레이쿠폰</div>
        <div class="item" data-go="sec-coupon-deposit">💸 입금더블업쿠폰</div>
        <div class="item" data-go="sec-coupon-daily">💸 일일플레이쿠폰</div>
        <div class="item" data-go="sec-coupon-host">💸 담당HOST쿠폰</div>
        <div class="item" data-go="sec-coupon-off">💸 돌발쿠폰 OFF</div>
      </div>
    </aside>

    <main class="center hero-collapsed" id="centerPanel">
      <!-- HERO (접힘/펼침) -->
      <div class="hero-row">
        <div class="hero-grid" id="heroGrid">
          <div class="hero-card"><span class="title">Mystery Host</span><span class="tg"></span></div>
          <div class="hero-card"><span class="title">Executive Host</span><span class="tg"></span></div>
          <div class="hero-card"><span class="title">Executive Host</span><span class="tg"></span></div>
        </div>
      </div>

      <!-- SOCKETS 세트 (좌 빅1 + 우 스몰4) -->
      <div class="sockets-wrap" id="socketsWrap">
        <section class="sockets" id="socketsRow">
          <div class="s-card s-big"></div>
          <div class="s-card"></div>
          <div class="s-card"></div>
          <div class="s-card"></div>
          <div class="s-card"></div>
        </section>
      </div>

      <!-- CONTENT -->
      <div class="content-wrap" id="contentWrap">
        <section id="sec-home" class="content-section active"><div class="king">
          <h3>문의</h3>
          <p class="muted">FAQ/빠른 답변</p>
          <p class="muted">※ 카테고리 클릭 시 위 소켓 세트는 아래로 슬라이드되어 사라지고, 아래(왕빅) 영역이 위로 슬라이드되어 해당 페이지가 나타납니다.</p>
        </div></section>

        <!-- 카테고리 페이지들 -->
        <section id="sec-partner-service" class="content-section"><div class="king"><h3>파트너서비스</h3></div></section>
        <section id="sec-benefits" class="content-section"><div class="king"><h3>등급별 혜택</h3></div></section>
        <section id="sec-partner-greet" class="content-section"><div class="king"><h3>파트너인사</h3></div></section>
        <section id="sec-contact-write" class="content-section"><div class="king"><h3>문의하기</h3></div></section>
        <section id="sec-contact" class="content-section"><div class="king"><h3>문의</h3></div></section>
        <section id="sec-preference" class="content-section"><div class="king"><h3>선호도체크</h3></div></section>
        <section id="sec-quiz-coupon" class="content-section"><div class="king"><h3>퀴즈풀고쿠폰받기</h3></div></section>
        <section id="sec-coupon-apply" class="content-section"><div class="king"><h3>쿠폰신청하기</h3></div></section>

        <section id="sec-promo-official" class="content-section"><div class="king"><h3>공식프로모션</h3></div></section>
        <section id="sec-promo-partner" class="content-section"><div class="king"><h3>파트너프로모션</h3></div></section>
        <section id="sec-promo-now" class="content-section"><div class="king"><h3>지금진행중</h3></div></section>
        <section id="sec-promo-join" class="content-section"><div class="king"><h3>프로모션참여하기</h3></div></section>

        <section id="sec-coupon-new" class="content-section"><div class="king"><h3>신규무료쿠폰</h3></div></section>
        <section id="sec-coupon-weekly" class="content-section"><div class="king"><h3>주간플레이쿠폰</h3></div></section>
        <section id="sec-coupon-deposit" class="content-section"><div class="king"><h3>입금더블업쿠폰</h3></div></section>
        <section id="sec-coupon-daily" class="content-section"><div class="king"><h3>일일플레이쿠폰</h3></div></section>
        <section id="sec-coupon-host" class="content-section"><div class="king"><h3>담당HOST쿠폰</h3></div></section>
        <section id="sec-coupon-off" class="content-section"><div class="king"><h3>돌발쿠폰 OFF</h3></div></section>
      </div>
    </main>
  </div>

<script>
(function(){
  const $ = (s,r=document)=>r.querySelector(s);
  const $$= (s,r=document)=>Array.from(r.querySelectorAll(s));

  const center = $('#centerPanel');
  const heroRow = $('.hero-row');
  const heroGrid = $('#heroGrid');
  const heroCards = $$('.hero-card', heroGrid);
  const socketsWrap = $('#socketsWrap');
  const contentWrap = $('#contentWrap');
  const vip = $('#vipToggle');

  // HERO helpers
  function heroNaturalHeight(){
    const prev = heroRow.style.maxHeight; heroRow.style.maxHeight = 'none';
    const h = heroRow.scrollHeight; heroRow.style.maxHeight = prev || '0px'; return h;
  }
  function openHeroBase(){
    center.classList.remove('hero-collapsed');
    heroRow.style.maxHeight = (heroNaturalHeight()||heroRow.scrollHeight||320) + 'px';
    vip.textContent = 'VIP HOST CALL ▴';
  }
  function closeHero(){
    center.classList.add('hero-collapsed');
    heroRow.style.maxHeight = '0px';
    // 카드 위치 초기화
    heroCards.forEach(c=>c.classList.remove('enter'));
    vip.textContent = 'VIP HOST CALL ▾';
  }

  // 순차 등장(좌→우). 각 카드가 70% 진행 시 다음 카드 시작
  function openHeroSequence(){
    openHeroBase();
    const dur = 2000; // ms, --hero-dur 과 동일
    heroCards.forEach(c=>c.classList.remove('enter'));
    // 시작 약간 지연하여 max-height 전개와 동조
    setTimeout(()=>{
      heroCards[0]?.classList.add('enter');
      setTimeout(()=>{ heroCards[1]?.classList.add('enter'); }, Math.floor(dur*0.7));
      setTimeout(()=>{ heroCards[2]?.classList.add('enter'); }, Math.floor(dur*0.7*2));
    }, 50);
  }

  // Slide swap: sockets DOWN & fade, content UP (페이지는 2배 느리게)
  function slideSwapToPage(sectionId){
    // hide all pages then show chosen
    $$('.content-section', contentWrap).forEach(s=>{ s.classList.remove('active'); s.style.display='none'; });
    const page = document.getElementById(sectionId);
    if(page){ page.style.display='block'; page.classList.add('active'); }

    // 프레임 모드(빨간/노란 박스 표시)
    center.classList.add('framed');

    // ensure hero is closed before swap
    closeHero();

    // 이동 중 네온 보더
    center.classList.add('moving');

    // measure sockets height (current visible height)
    const h = socketsWrap.getBoundingClientRect().height;
    socketsWrap.classList.add('anim-sockets');
    contentWrap.classList.add('anim-content');

    // 준비 상태 (transform 기준으로만 애니메이션)
    socketsWrap.style.transform = 'translateY(0px)';
    contentWrap.style.transform = 'translateY(0px)';

    // 시작 프레임
    requestAnimationFrame(()=>{
      center.classList.add('swap');
      socketsWrap.style.transform = 'translateY(' + h + 'px)';   // 아래로
      contentWrap.style.transform = 'translateY(' + (-h) + 'px)'; // 위로
    });

    const onEnd = ()=>{
      socketsWrap.style.display='none';
      socketsWrap.style.transform='';
      socketsWrap.classList.remove('anim-sockets');
      center.classList.remove('swap');
      contentWrap.style.transform='';
      contentWrap.classList.remove('anim-content');
      heroRow.style.maxHeight='0px';

      // 이동 끝 – 네온 반짝 2초
      const frameTarget = (page && page.querySelector('.king')) || contentWrap;
      frameTarget.classList.add('neon-pulse');
      setTimeout(()=>frameTarget.classList.remove('neon-pulse'), 2000);

      center.classList.remove('moving');
      contentWrap.removeEventListener('transitionend', onEnd);
    };
    contentWrap.addEventListener('transitionend', onEnd, {once:true});
  }

  // expose for tests
  window.__demo = { slideSwapToPage };

  // Sidebar: 클릭 처리 (아코디언/네온호버/페이지 전환)
  const sidebar = $('#sidebar');
  const neonTimers = new WeakMap();
  function leaving(el, rel){ return !rel || (rel !== el && !el.contains(rel)); }
  sidebar.addEventListener('click', (e)=>{
    const h4 = e.target.closest('h4');
    if(h4){
      const grp = h4.parentElement; grp.classList.toggle('collapsed');
      return;
    }
    const item = e.target.closest('.item'); if(!item) return;
    const id = item.getAttribute('data-go'); if(!id) return;
    slideSwapToPage(id);
  });
  sidebar.addEventListener('pointerover', (e)=>{
    const it = e.target.closest('.item'); if(!it) return;
    clearTimeout(neonTimers.get(it));
    it.classList.remove('neon-out');
    it.classList.add('neon','neon-blink');
  }, true);
  sidebar.addEventListener('pointerout', (e)=>{
    const it = e.target.closest('.item'); if(!it) return;
    if(!leaving(it, e.relatedTarget)) return; // 실제로 아이템 밖으로 나간 경우에만 종료 처리
    clearTimeout(neonTimers.get(it));
    it.classList.remove('neon-blink'); // 깜빡임 정지, 잔광 유지
    const t = setTimeout(()=>{
      it.classList.add('neon-out');
      it.addEventListener('animationend', function handler(){
        it.classList.remove('neon','neon-out');
        it.removeEventListener('animationend', handler);
      }, {once:true});
    }, 2000);
    neonTimers.set(it,t);
  }, true);

  // vip toggle
  vip.addEventListener('click', ()=>{
    const collapsed = center.classList.contains('hero-collapsed');
    if (socketsWrap.style.display === 'none'){
      socketsWrap.style.display = ''; // show sockets again for hero view
    }
    if (collapsed){
      openHeroSequence();
      center.classList.remove('framed');
    } else {
      closeHero();
    }
  });

  // initial state
  closeHero();
})();
</script>

<!-- Lightweight console tests (non-visual) -->
<script>
(function(){
  function assert(name, cond){
    if(!cond){ console.error('❌ Test failed:', name); return false; }
    console.log('✅', name); return true;
  }
  // run quick tests after DOM ready
  document.addEventListener('DOMContentLoaded', ()=>{
    try{
      assert('window.__demo exposed', typeof window.__demo === 'object');
      assert('slideSwapToPage is function', typeof window.__demo.slideSwapToPage === 'function');
      // invoke with a valid section id; display should toggle immediately
      window.__demo.slideSwapToPage('sec-partner-service');
      const page = document.getElementById('sec-partner-service');
      setTimeout(()=>{
        assert('section became active', page && page.style.display === 'block' && page.classList.contains('active'));
      }, 10);
    }catch(err){
      console.error('Test harness error:', err);
    }
  });
})();
</script>
</body>
</html>
